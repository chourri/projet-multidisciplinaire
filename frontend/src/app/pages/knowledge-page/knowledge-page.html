<app-header></app-header>

<div class="min-h-screen bg-[#f8f9fa] text-slate-800 font-sans">
  
  <div class="container mx-auto max-w-7xl px-6 pt-12 pb-24">

    <div class="border-b border-slate-300 pb-8 mb-12">
      <h1 class="text-4xl font-serif font-bold text-slate-900 mb-4">
        Knowledge Repository
      </h1>
      <p class="text-slate-600 max-w-3xl leading-relaxed">
        Centralized documentation for the Climate Extreme Event Prediction System. 
        This repository contains the defining ontologies, architectural specifications, and data methodologies used by the system.
      </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">

      <aside class="hidden lg:block lg:col-span-3">
        <div class="sticky top-24">
          <h3 class="text-xs font-bold uppercase tracking-widest text-slate-400 mb-6">
            Table of Contents
          </h3>
          
          <nav class="space-y-1 border-l border-slate-200">
            @for (article of articles; track article.id) {
              <button 
                (click)="scrollTo(article.id)"
                class="block w-full text-left px-4 py-3 text-sm transition-all border-l-2 -ml-[2px]"
                [ngClass]="{
                  'border-slate-900 text-slate-900 font-bold bg-white shadow-sm': activeArticleId() === article.id,
                  'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300': activeArticleId() !== article.id
                }"
              >
                {{ article.title }}
              </button>
            }
          </nav>

          <div class="mt-10 pt-8 border-t border-slate-200">
            <button class="flex items-center gap-3 text-sky-800 text-xs font-bold uppercase tracking-wide hover:underline">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
              Download Full Documentation (PDF)
            </button>
          </div>
        </div>
      </aside>

      <main class="lg:col-span-9 space-y-16">
        
        @for (article of articles; track article.id) {
          <article [id]="article.id" class="scroll-mt-32 border-b border-slate-200 pb-16 last:border-0">
            
            <header class="mb-8">
              <div class="flex items-center gap-3 mb-4">
                <span class="font-mono text-xs font-bold text-sky-800 bg-sky-50 px-2 py-1 uppercase tracking-wide">
                  {{ article.id }}
                </span>
                <span class="text-xs font-bold uppercase tracking-widest text-slate-400">
                  {{ article.category }}
                </span>
              </div>
              <h2 class="text-3xl font-serif font-bold text-slate-900 leading-tight">
                {{ article.title }}
              </h2>
            </header>

            <div class="prose prose-slate prose-lg max-w-none text-slate-700 leading-loose"
                 [innerHTML]="article.content">
            </div>

            <div class="mt-8 pt-4 flex items-center gap-2 text-xs text-slate-400 font-mono">
              <span>LAST_UPDATED: {{ article.lastUpdated }}</span>
              <span>//</span>
              <span>VER: 1.0.4</span>
            </div>

          </article>
        }

      </main>

    </div>
  </div>
</div>